"use strict";setTimeout(function(){document.getElementById("signup").className+="visible"},3e3),setTimeout(function(){document.getElementById("social").className+="visible"},5e3);var Engine=Matter.Engine,World=Matter.World,Bodies=Matter.Bodies,Body=Matter.Body,Composite=Matter.Composite,Composites=Matter.Composites,Common=Matter.Common,Constraint=Matter.Constraint,Events=Matter.Events,Bounds=Matter.Bounds,Vector=Matter.Vector,MouseConstraint=Matter.MouseConstraint,Mouse=Matter.Mouse,Query=Matter.Query;if(window.MatterTools)var Gui=MatterTools.Gui,Inspector=MatterTools.Inspector;var Demo={},_engine,_gui,_inspector,_sceneName,_mouseConstraint,_sceneEvents=[],_useInspector=-1!==window.location.hash.indexOf("-inspect"),_isMobile=/(ipad|iphone|ipod|android)/gi.test(navigator.userAgent);Demo.init=function(){var e=document.getElementById("cells"),n={positionIterations:6,velocityIterations:4,enableSleeping:!1};_engine=Engine.create(e,n),Engine.run(_engine),Demo.cells()},window.addEventListener?window.addEventListener("load",Demo.init):window.attachEvent&&window.attachEvent("load",Demo.init),Demo.cells=function(){var e=_engine.world;Demo.reset(),_engine.world.gravity.y=0,_engine.world.gravity.x=0;var n=_engine.render.options;n.wireframes=!1,n.width=2*window.innerWidth,n.height=2*window.innerHeight,n.showAngleIndicator=!1,n.background="rgba(255,255,255,0)",_engine.render.canvas.width=2*window.innerWidth,_engine.render.canvas.height=2*window.innerHeight,_engine.world.bounds.max.x=window.innerWidth,_engine.world.bounds.max.y=window.innerHeight,_engine.render.context.scale(2,2);World.add(e,[Bodies.rectangle(0,0,10,2*window.innerHeight,{isStatic:!0,render:{fillStyle:"rgba(255,255,255,0)",strokeStyle:"rgba(255,255,255,0)"}}),Bodies.rectangle(window.innerWidth,0,10,2*window.innerHeight,{isStatic:!0,render:{fillStyle:"rgba(255,255,255,0)",strokeStyle:"rgba(255,255,255,0)"}}),Bodies.rectangle(0,0,2*window.innerWidth,10,{isStatic:!0,render:{fillStyle:"rgba(255,255,255,0)",strokeStyle:"rgba(255,255,255,0)"}}),Bodies.rectangle(0,window.innerHeight,2*window.innerWidth-10,10,{isStatic:!0,render:{fillStyle:"rgba(255,255,255,0)",strokeStyle:"rgba(255,255,255,0)"}})]);var t=0,o=0;o=Math.floor(window.innerWidth/10);var i=function(e,n,t){var o=Common.random(3,80)/100;o=o.toFixed(2);var i=Composite.create({label:"Cell"}),r=Bodies.circle(e,n,t,{label:"Membrane",friction:1e-5,restitution:1e-4,density:.1,render:{fillStyle:"rgba(255,255,255,0)",fillStyleTo:"rgba(255,255,255,0)",strokeStyle:"rgba(255,255,255,0)",strokeStyleTo:"rgba(255,255,255,"+o+")",lineWidth:2}}),s=Bodies.circle(e,n,t/5,{label:"Nucleus",friction:0,restitution:0,density:.1,render:{fillStyle:"rgba(255,255,255,0)",fillStyleTo:"rgba(255,255,255,"+o+")",strokeStyle:"rgba(255,255,255,0)",lineWidth:0}});return Composite.addBody(i,r),Composite.addBody(i,s),s.slop=0,s.friction=0,s.density=0,s.inertia=0,Common.random(1,600)>560&&(i.cancer=!0),i.bodies[0].parentId=i.id,i};_sceneEvents.push(Events.on(_engine,"collisionStart",function(e){for(var n=e.pairs,t=Composite.allComposites(_engine.world),o=0;o<t.length;o++){var i=t[o],r=i.bodies[0];r.id==n[0].bodyA.id&&Common.random(0,10)>9&&(i.cancer=!0)}})),_sceneEvents.push(Events.on(_engine,"beforeUpdate",function(n){var s=n.source;if(n.timestamp%10<20&&(r(s),++t<o)){var a=Common.random(50,window.innerWidth-50),l=Common.random(50,window.innerHeight-50),d=Common.random(3,30);World.add(e,i(a,l,d))}}));var r=function(e){for(var n=Composite.allComposites(e.world),t=0;t<n.length;t++){var o,i=n[t],r=i.bodies[1],a=i.bodies[0];i.cancer?(r.render.fillStyle=s(r.render.fillStyle,"rgba(255,0,0,0.8)"),a.render.fillStyle=s(a.render.fillStyle,"rgba(255,0,0,0)"),a.render.strokeStyle=s(a.render.strokeStyle,"rgba(255,0,0,0.8)")):(r.render.fillStyle=s(r.render.fillStyle,r.render.fillStyleTo),a.render.fillStyle=s(a.render.fillStyle,a.render.fillStyleTo),a.render.strokeStyle=s(a.render.strokeStyle,a.render.strokeStyleTo)),r.position.x=a.position.x,r.position.y=a.position.y,o=i.cancer?.005*i.bodies[1].mass:2e-4*i.bodies[1].mass,Body.applyForce(i.bodies[0],{x:0,y:0},{x:(o+Common.random(-1,1)*o)*Common.choose([1,-1]),y:(o+Common.random(-1,1)*o)*Common.choose([1,-1])})}},s=function(e,n){var t={},o={};return t.r=parseInt(e.split(",")[0].split("(")[1]),t.g=parseInt(e.split(",")[1]),t.b=parseInt(e.split(",")[2]),t.a=parseFloat(e.split(",")[3]),o.r=parseInt(n.split(",")[0].split("(")[1]),o.g=parseInt(n.split(",")[1]),o.b=parseInt(n.split(",")[2]),o.a=parseFloat(n.split(",")[3]),t.r!=o.r&&(t.r=t.r<o.r?t.r+=10:t.r-=10),t.g!=o.g&&(t.g=t.g<o.g?t.g+=10:t.g-=10),t.b!=o.b&&(t.b=t.b<o.b?t.b+=10:t.b-=10),t.a!=o.a&&(t.a=t.a<o.a?t.a+=.01:t.a-=.01),e="rgba("+t.r+","+t.g+","+t.b+","+t.a+")"}},Demo.reset=function(){var e=_engine.world;World.clear(e),Engine.clear(_engine);var n=_engine.render.controller;n.clear&&n.clear(_engine.render);for(var t=0;t<_sceneEvents.length;t++)Events.off(_engine,_sceneEvents[t]);if(e.events)for(t=0;t<_sceneEvents.length;t++)Events.off(e,_sceneEvents[t]);_sceneEvents=[],Common._nextId=0,Common._seed=0,_engine.enableSleeping=!1,_engine.world.gravity.y=1,_engine.world.gravity.x=0,_engine.timing.timeScale=1;var o=_engine.render.options;o.wireframes=!0,o.hasBounds=!1,o.showDebug=!1,o.showBroadphase=!1,o.showBounds=!1,o.showVelocity=!1,o.showCollisions=!1,o.showAxes=!1,o.showPositions=!1,o.showAngleIndicator=!0,o.showIds=!1,o.showShadows=!1,o.background="#fff",_isMobile&&(o.showDebug=!0)};